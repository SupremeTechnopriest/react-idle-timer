#!/bin/bash

if [ -z "$(git status --porcelain)" ]; then
  # Working directory clean
  yarn publish --new-version $SEMVER
  git push origin master --tags
else
  # Uncommitted changes
  printf "ğŸ— preparing package for publish"

  # Commit the changed files
  git add .
  git commit -m "ğŸ— preparing package publish"

  # Bump version and publish
  yarn publish --new-version $SEMVER
  git push origin master --tags

  printf "âœ…  Package published"

fi
